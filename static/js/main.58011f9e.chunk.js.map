{"version":3,"sources":["i18n.ts","my_util/Util.tsx","pages/MyBanner.tsx","pages/IndexPage.tsx","pages/IPDownload.tsx","pages/IPPage.tsx","pages/TestAnimation.tsx","pages/wiki/WikiHeading.tsx","pages/wiki/WikiContent.tsx","pages/wiki/WikiSidebar.tsx","pages/wiki/WikiSearching.tsx","pages/wiki/WikiPage.tsx","AnimatedPages.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","debug","interpolation","escapeValue","react","gfm","require","MyButton","props","Button","style","textTransform","variant","onClick","href","children","useEndPoint","url","useState","data","complete","pending","error","res","setRes","useEffect","unmounted","Axios","then","catch","getCurrentLanguage","currLanguage","i18next","language","undefined","notEmpty","value","MyImage","useTranslation","t","loaded","setLoaded","position","src","onLoad","maxWidth","minHeight","alt","onError","baseMarkdownRenderers","image","a","paragraph","marginTop","marginBottom","heading","level","Typography","fontSize","MyMarkdown","className","plugins","renderers","MyRemoteMarkdown","resultData","getIsVerticalMobile","window","innerHeight","innerWidth","getPublicResourcePath","path","process","getStringBetween","str","before","after","i","indexOf","j","length","substr","supportedLanguages","languageName","LanguageSelector","currLanguageDistrict","hyphenIndex","getCurrentLanguageDistrict","React","anchorEl","setAnchorEl","handleClose","aria-controls","aria-haspopup","event","currentTarget","color","marginLeft","find","entry","Menu","id","keepMounted","open","Boolean","onClose","map","MenuItem","changeLanguage","MyBanner","location","useLocation","history","useHistory","document","title","text","getElementById","pageIconPath","AppBar","sticky","backgroundColor","margin","padding","top","Toolbar","currPath","pathname","lastIndexOf","push","flexGrow","IndexPage","cardStyle","Card","square","elevation","CardActionArea","display","flexDirection","justifyContent","background","width","getModVersionFromModJarName","modJarName","DownloadTerm","expandIcon","downloadUrl","isPreRelease","modVersion","AccordionDetails","alignItems","upgradeInfo","publishTime","downloadCount","IPDownload","releaseInfo","toDisplay","modJarAssets","assets","filter","asset","name","publishDate","published_at","mcVersion","browser_download_url","body","prerelease","download_count","groupedByMcVersion","_","groupBy","r","toPairsIn","pair","termList","firstRelease","findIndex","term","splice","IPFeatures","IPPage","downloadSectionRef","useRef","spacing","flexWrap","marginRight","alignSelf","flexBasis","minWidth","current","scrollIntoView","behavior","to","textDecoration","ref","MyClippingCollapse","state","setState","domRef","clipPath","contentHeight","clientHeight","num","shown","setTimeout","duration","transition","WikiContextForHeading","createContext","isMatureRef","getHeadingColor","headingSelectedColor","WikiHeading","myRef","headingHash","node","myHeadingHash","useContext","selectedByUrl","hash","scrollFunc","y","getBoundingClientRect","outerHeight","timer","clearTimeout","getHeadingFontSize","e","left","right","bottom","zIndex","flexShrink","Object","keys","defaultRenderers","isHeading","type","isHeadingWithContent","obj","myType","toRemoveFromHash","headingTextToHash","toLowerCase","replace","produceHeadingHash","headingNode","joined","n","join","assignedHash","HeadingHierarchyParser","c","currIndex","headingDiscriminatorNumbers","this","Map","headingIndex","findIndexFrom","result","slice","minDepth","base","parseNonHeadingContents","isEnded","currHeading","currDepth","depth","remaining","parseHierarchy","originalHeadingHash","number","get","discriminatedHeadingHash","set","headingElement","contents","extractHeadingContentGroup","getRendererProps","tree","xtend","definitions","getDefinitions","myParseMarkdownAsync","source","processor","unified","parse","run","wrapTableRows","addListMetadata","naiveHtml","RightBarSection","opened","setOpened","selected","setSelected","item","hasContent","w","viewed","outerSelectedHash","setOuterSelected","onViewed","s","removeAssignedHash","headingColor","Fragment","ListItem","button","paddingLeft","layer","onTitleClick","ExpandLess","Collapse","in","timeout","List","dense","index","cond","getHeadingRefs","hierarchy","forEach","element","console","FlatWikiSection","Provider","astToReact","root","renderOptions","MemoedFlatWikiSection","memo","MemoedRightBarSection","useWikiContent","contentUrl","scrollDomRef","fallbackUrl","rightBarScrollRef","reactMarkdownProps","setTree","errorLoading","setErrorLoading","isAwaitingTranslation","setIsAwaitingTranslation","rightBarEnabled","setRightBarEnabled","hierarchyRef","renderPropsRef","markdownResult","renderer","parsedMarkdown","doParseWikiContent","rendererProps","viewingSectionHash","setViewingSectionHash","wikiContents","enableSectionUpdate","timerRef","headingRefs","updateScrollMemoed","useCallback","active","scrollTop","scrollHeight","screenHeight","documentElement","scrollPosition","offsetTop","titles","v","termDom","termY","offset","scrollTo","wikiContentComponent","rightBarComponent","updateScrollFunc","WikiToSideBarContext","onTermClicked","getLocalWikiUrlFromGithubWikiUrl","githubWikiUrl","MySidebarLink","localUrl","context","MyLinkInWiki","targetLink","localWikiUrlFromGithubWikiUrl","octokit","Octokit","testSearch","searchAndFindCorrelatedFiles","keyword","githubRepo","log","request","q","status","Error","items","paths","SearchingContext","onClicked","isFileIncludedInSearch","filePathInRepo","fileLanguage","startsWith","SearchingResultSection","link","filePath","slashIndex","dotIndex","filePathToPagePath","wikiMarkdownRenderers","previewText","SearchingResultFileEntry","sectionDatas","setSectionDatas","fileContent","occurences","caseSensitive","keywordLen","startIndex","indices","getIndicesOf","lastLineBreakIndex","lineBreakIndexBehind","lineBreakIndexFront","poundIndex","headingEndIndex","coerceHashMarkIndex","trimStart","extractSearchingSectionDatas","SearchingDialogComponent","setKeyword","currState","setCurrState","filePaths","setFilePaths","filteredPaths","doSearch","doSearchAsync","Dialog","enabled","close","fullWidth","DialogTitle","TextField","autoFocus","onChange","target","onKeyUp","key","getMdUrlFromWikiUrl","head","innerPath","b","getStringAfter","table","Table","tableHead","TableHead","tableRow","TableRow","tableBody","TableBody","tableCell","TableCell","code","overflowX","inlineCode","parseWikiPageEntries","newEntry","IPWikiPage","wikiContentUrl","fallbackWikiContentUrl","wikiTitle","setWikiTitle","wikiPageEntries","setWikiPageEntries","isDrawerOpen","setIsDrawerOpen","isPageNotFound","setIsPageNotFound","sideBarData","sidebarComplete","isSearchingDialogShown","setSearchingDialogShown","newPageEntries","doParseLeftbar","leftBarComponent","Divider","component","leftBarOnMobile","Drawer","anchor","leftBarOnPC","overflowY","scrollTimerRef","isVerticalMobile","IconButton","onScroll","TestPage","doIt","AnimatedPages","refMouseX","refMouseY","listener","clientX","clientY","addEventListener","removeEventListener","setProperty","fallback","TransitionGroup","CSSTransition","classNames","exact","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.58011f9e.chunk.js","sourcesContent":["import i18n from \"i18next\";\r\nimport {initReactI18next} from \"react-i18next\";\r\n\r\nimport Backend from 'i18next-http-backend';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\n\r\ni18n\r\n    // load translation using http -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\r\n    // learn more: https://github.com/i18next/i18next-http-backend\r\n    .use(Backend)\r\n\r\n    // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n    .use(LanguageDetector)\r\n\r\n    .use(initReactI18next)\r\n\r\n    // for all options read: https://www.i18next.com/overview/configuration-options\r\n    .init({\r\n        // detection: detectorOptions,\r\n        fallbackLng: 'en',\r\n        debug: true,\r\n\r\n        interpolation: {\r\n            escapeValue: false, // not needed for react as it escapes by default\r\n        },\r\n\r\n        react: {\r\n            // useSuspense: false\r\n        }\r\n    });\r\n\r\n// // catch the event and make changes accordingly\r\n// i18n.on('languageChanged', function(lng) {\r\n//\r\n// });\r\n\r\nexport default i18n;","import React, {DOMElement, useEffect, useRef, useState} from \"react\";\r\nimport {Button, Collapse} from \"@material-ui/core\";\r\nimport Axios from \"axios\";\r\nimport i18next from \"i18next\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {useTranslation} from \"react-i18next\";\r\nconst gfm = require('remark-gfm')\r\n\r\nexport function MyButton(props: { children: any, style?: React.CSSProperties, onClick?: any, href?: any }) {\r\n    return <Button style={{\r\n        textTransform: 'none', ...props.style\r\n    }} variant={\"contained\"} onClick={props.onClick} href={props.href}>{props.children}</Button>;\r\n}\r\n\r\nexport function useEndPoint(url: string) {\r\n    const [res, setRes] = useState({\r\n        data: null,\r\n        complete: false,\r\n        pending: false,\r\n        error: false\r\n    });\r\n    useEffect(\r\n        () => {\r\n            let unmounted = false;\r\n            \r\n            setRes({\r\n                data: null,\r\n                pending: true,\r\n                error: false,\r\n                complete: false\r\n            });\r\n            Axios({url: url})\r\n                .then(res => {\r\n                    if (unmounted) return;\r\n                    setRes({\r\n                        data: res.data,\r\n                        pending: false,\r\n                        error: false,\r\n                        complete: true\r\n                    });\r\n                },)\r\n                .catch(() => {\r\n                    if (unmounted) return;\r\n                    setRes({\r\n                        data: null,\r\n                        pending: false,\r\n                        error: true,\r\n                        complete: true\r\n                    });\r\n                });\r\n            \r\n            return () => {\r\n                unmounted = true;\r\n            }\r\n        },\r\n        [url]\r\n    );\r\n    return res;\r\n}\r\n\r\nexport function getCurrentLanguage() {\r\n    var currLanguage = i18next.language;\r\n    \r\n    if (currLanguage === undefined) {\r\n        currLanguage = 'en';\r\n    }\r\n    return currLanguage;\r\n}\r\n\r\nexport function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\r\n    return value !== null && value !== undefined;\r\n}\r\n\r\nexport function swapInArray<TValue>(array: TValue[], i1: number, i2: number) {\r\n    var temp = array[i1];\r\n    array[i1] = array[i2];\r\n    array[i2] = temp;\r\n}\r\n\r\n\r\n\r\nexport function MyImage(props: { url: string }) {\r\n    // return <img src={props.url} style={{\r\n    //     maxWidth: '100%'\r\n    // }} alt={'Fails to load ' + props.url}/>\r\n    \r\n    const {t, i18n} = useTranslation();\r\n    \r\n    const [loaded, setLoaded] = useState(false);\r\n    \r\n    return <div style={{position: \"relative\"}}>\r\n        {!loaded && <div style={{position: \"absolute\"}}>\r\n            <CircularProgress/>\r\n            <p>{t('image_loading')}</p>\r\n        </div>}\r\n        \r\n        <img src={props.url} onLoad={() => setLoaded(true)} style={{\r\n            maxWidth: '100%', minHeight: 100\r\n        }} alt={'Fails to load ' + props.url} onError={() => setLoaded(true)}/>\r\n        \r\n        \r\n        {/*<Collapse in={!loaded}>*/}\r\n        {/*    <CircularProgress/>*/}\r\n        {/*</Collapse>*/}\r\n        {/*<Collapse in={loaded}>*/}\r\n        {/*    <img src={props.url} onLoad={() => setLoaded(true)} style={{*/}\r\n        {/*        maxWidth: '100%'*/}\r\n        {/*    }} alt={'Fails to load ' + props.url} onError={() => setLoaded(true)}/>*/}\r\n        {/*</Collapse>*/}\r\n    </div>;\r\n}\r\n\r\nexport const baseMarkdownRenderers = {\r\n    image: (a: any) => {\r\n        return <MyImage url={a.src}/>\r\n    },\r\n    paragraph: (a: any) => {\r\n        return <div style={{marginTop: 10, marginBottom: 10}}>{a.children}</div>\r\n    },\r\n    heading: (a: any) => {\r\n        // console.log(a)\r\n        const level: any = a.level;\r\n        \r\n        return <Typography style={{fontSize: 40 - level * 5}}>{a.children}</Typography>\r\n    }\r\n}\r\n\r\nexport function MyMarkdown(props: { children: any }) {\r\n    return <ReactMarkdown className='My-MD' plugins={[gfm]} renderers={baseMarkdownRenderers}>\r\n        {props.children}\r\n    </ReactMarkdown>\r\n}\r\n\r\nexport function MyRemoteMarkdown(props: { url: string }) {\r\n    const {data: resultData, complete: resultComplete} = useEndPoint(props.url);\r\n    \r\n    return resultComplete ? (<MyMarkdown children={resultData || 'error loading ' + props.url}/>)\r\n        : (<CircularProgress/>)\r\n}\r\n\r\nexport function getStringAfter(a: string, b: string) {\r\n    var i = a.lastIndexOf(b);\r\n    if (i === -1) {\r\n        return a;\r\n    }\r\n    return a.substr(i + b.length);\r\n}\r\n\r\nexport function getIsVerticalMobile() {\r\n    // return true\r\n    return window.innerHeight > window.innerWidth;\r\n}\r\n\r\nexport function BannerHideOnScroll(props: {\r\n    window?: () => Window;\r\n    children: React.ReactElement;\r\n}) {\r\n    const {children, window} = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({target: window ? window() : undefined});\r\n    \r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children}\r\n        </Slide>\r\n    );\r\n}\r\n\r\nexport function getPublicResourcePath(path: string) {\r\n    return process.env.PUBLIC_URL + path;\r\n}\r\n\r\nexport function getStringBetween(str: string, before: string, after: string) {\r\n    let i = str.indexOf(before);\r\n    \r\n    if (i === -1) {\r\n        return ''\r\n    }\r\n    \r\n    let j = str.indexOf(after, i + before.length);\r\n    \r\n    if (j === -1) {\r\n        return '';\r\n    }\r\n    \r\n    return str.substr(i + before.length, j - i - before.length);\r\n}\r\n\r\n// export function isMostlyInViewport(element: HTMLElement) {\r\n//     const rect = element.getBoundingClientRect();\r\n//     return (\r\n//         rect.top >= 100 &&\r\n//         rect.left >= 100 &&\r\n//         rect.bottom <= ((window.innerHeight || document.documentElement.clientHeight) - 100) &&\r\n//         rect.right <= ((window.innerWidth || document.documentElement.clientWidth) - 100)\r\n//     );\r\n// }","import {Menu, MenuItem, Select} from \"@material-ui/core\";\r\nimport React, {useEffect} from \"react\";\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport i18next from \"i18next\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\n\r\nimport TranslateIcon from '@material-ui/icons/Translate';\r\nimport {getCurrentLanguage, getIsVerticalMobile, getStringAfter} from \"../my_util/Util\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nfunction getCurrentLanguageDistrict() {\r\n    let currLanguage = getCurrentLanguage();\r\n    \r\n    const hyphenIndex = currLanguage.indexOf('-');\r\n    if (hyphenIndex !== -1) {\r\n        currLanguage = currLanguage.substr(0, hyphenIndex);\r\n    }\r\n    return currLanguage;\r\n}\r\n\r\ninterface LanguageEntry {\r\n    language: string,\r\n    languageName: string\r\n}\r\n\r\nconst supportedLanguages: Array<LanguageEntry> = [\r\n    {language: 'en', languageName: 'English'},\r\n    {language: 'zh', languageName: '简体中文'},\r\n]\r\n\r\nfunction LanguageSelector(props: {}) {\r\n    const currLanguageDistrict = getCurrentLanguageDistrict();\r\n    \r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null as null | HTMLElement);\r\n    \r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    \r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n    \r\n    return <>\r\n        <Button aria-controls=\"language-menu\" aria-haspopup=\"true\"\r\n                onClick={handleClick}\r\n                style={{color: 'white'}}>\r\n            <TranslateIcon/>\r\n            {getIsVerticalMobile() ? undefined :\r\n                <Typography style={{marginLeft: 5, textTransform: 'none'}}>{\r\n                    supportedLanguages.find(entry => entry.language === currLanguageDistrict)?.languageName\r\n                }</Typography>}\r\n        </Button>\r\n        <Menu\r\n            id=\"language-menu\"\r\n            anchorEl={anchorEl}\r\n            keepMounted\r\n            open={Boolean(anchorEl)}\r\n            onClose={handleClose}\r\n        >\r\n            {supportedLanguages.map(entry =>\r\n                <MenuItem value={entry.language} key={entry.language} onClick={() => {\r\n                    i18next.changeLanguage(entry.language);\r\n                    handleClose();\r\n                }}>{entry.languageName}</MenuItem>)}\r\n        </Menu>\r\n        \r\n        \r\n        {/*<Select id='language-select' style={{*/}\r\n        {/*    color: 'white'*/}\r\n        {/*}} value={currLanguageDistrict} onChange={(a) => {*/}\r\n        {/*    var languageStr = a.target.value;*/}\r\n        {/*    i18next.changeLanguage(languageStr as string)*/}\r\n        {/*}}>*/}\r\n        {/*    <MenuItem value={'zh'}>简体中文</MenuItem>*/}\r\n        {/*    <MenuItem value={'en'}>English</MenuItem>*/}\r\n        {/*</Select>*/}\r\n    </>\r\n}\r\n\r\nexport function MyBanner(props: {\r\n    text: string, color: string, children?: any,\r\n    sticky?: boolean, pageIconPath: string\r\n}) {\r\n    const location = useLocation();\r\n    \r\n    let history = useHistory();\r\n    \r\n    \r\n    // console.log(currLanguage)\r\n    \r\n    useEffect(() => {\r\n        document.title = props.text;\r\n        // @ts-ignore\r\n        document.getElementById('page_icon').href = props.pageIconPath;\r\n    }, []);\r\n    \r\n    return <AppBar style={{\r\n        position: props.sticky ? 'sticky' : 'relative', backgroundColor: props.color,\r\n        margin: 0, padding: 0,\r\n        top: props.sticky ? 0 : undefined\r\n    }}>\r\n        <Toolbar>\r\n            {props.children}\r\n            <Button onClick={() => {\r\n                const currPath = location.pathname;\r\n                const i = currPath.lastIndexOf('/');\r\n                if (i !== -1) {\r\n                    history.push(currPath.substr(0, i));\r\n                }\r\n            }} style={{textTransform: 'none'}}>\r\n                <Typography variant='h6' style={{color: 'white'}}>{props.text}</Typography>\r\n            </Button>\r\n            \r\n            <div style={{\r\n                flexGrow: 1\r\n            }}/>\r\n            \r\n            <LanguageSelector/>\r\n        </Toolbar>\r\n    \r\n    \r\n    </AppBar>;\r\n}","import React, {Component, CSSProperties, useState} from \"react\";\r\nimport {createStyles, Grid, Theme} from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {getIsVerticalMobile, getPublicResourcePath, MyButton} from \"../my_util/Util\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\r\nimport {MyClippingCollapse} from \"./TestAnimation\";\r\nimport {Link, useHistory} from \"react-router-dom\";\r\nimport {MyBanner} from \"./MyBanner\";\r\n\r\nimport {useTranslation} from 'react-i18next';\r\nimport {TFunction} from \"i18next\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\n\r\nexport function IndexPage(props: {}) {\r\n    \r\n    let history = useHistory();\r\n    \r\n    \r\n    let {t, i18n} = useTranslation();\r\n    \r\n    const cardStyle: CSSProperties = getIsVerticalMobile() ? {margin: 20} : {\r\n        margin: 20, marginLeft: 100, marginTop: 50\r\n    };\r\n    \r\n    return <div className=\"My-Page\">\r\n        <MyBanner text='qouteall' color='#ff4569' pageIconPath='/benzene.jpg'/>\r\n        <div className=\"App-header\">\r\n            <div className=\"Mask\"/>\r\n            <div className=\"Right-section\">\r\n                \r\n                <p className=\"Header-text\">\r\n                    qouteall\r\n                </p>\r\n                <p className=\"Sub-Header\">\r\n                    {t('main_desc')}\r\n                </p>\r\n            </div>\r\n            \r\n            <img src={getPublicResourcePath('/headerImage.png')} className=\"Header-image\" alt=\"what\"/>\r\n        \r\n        \r\n        </div>\r\n        \r\n        <div style={cardStyle}>\r\n            <Card style={{maxWidth: '80vh'}} square={false} elevation={10}>\r\n                <CardActionArea style={{\r\n                    display: 'flex', flexDirection: 'row', justifyContent: 'flex-start',\r\n                    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n                }} onClick={() => {\r\n                    history.push('/immptl')\r\n                }}>\r\n                    <img src={getPublicResourcePath('/immptl.png')} alt='i am alt' style={{width: 100}}/>\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'flex-start',\r\n                        marginLeft: 20\r\n                    }}>\r\n                        <label style={{\r\n                            textTransform: 'none',\r\n                            color: 'black',\r\n                            fontSize: 'calc(8px + 2vmin)'\r\n                        }}>\r\n                            {t(\"immptl\")}\r\n                        </label>\r\n                        <label style={{\r\n                            textTransform: 'none',\r\n                            color: 'black',\r\n                            fontSize: 'calc(5px + 2vmin)',\r\n                        }}>\r\n                            {t(\"immptl_desc\")}\r\n                        </label>\r\n                    </div>\r\n                </CardActionArea>\r\n            </Card>\r\n        </div>\r\n    </div>;\r\n    \r\n}\r\n","import Accordion from \"@material-ui/core/Accordion/Accordion\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary/AccordionSummary\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport React from \"react\";\r\nimport { getStringBetween, MyButton, notEmpty, useEndPoint } from \"../my_util/Util\";\r\nimport { AccordionDetails, Typography } from \"@material-ui/core\";\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport _, { Dictionary } from \"lodash\";\r\n\r\ninterface GAsset {\r\n    browser_download_url: string;\r\n    name: string;//filename\r\n    download_count: number;\r\n}\r\n\r\ninterface GReleaseInfo {\r\n    assets: GAsset[];\r\n    tag_name: string;\r\n    body: string;\r\n    prerelease: boolean;\r\n    published_at: string;\r\n}\r\n\r\n// deprecated because firefox doesn't support it\r\n// var findModVersion = new RegExp('(?<=immersive\\-portals\\-).+?(?=\\-)');\r\n// var findMcVersion = new RegExp('(?<=mc).+?(?=\\-)');\r\n\r\n\r\n\r\nfunction getModVersionFromModJarName(modJarName: string) {\r\n    const front = 'immersive-portals-';\r\n    const after = '-';\r\n    \r\n    return getStringBetween(modJarName,front,after);\r\n\r\n    // var found = findModVersion.exec(modJarName);\r\n    // if (found == null) {\r\n    //     return null;\r\n    // }\r\n    // return found[0];\r\n}\r\n\r\nfunction getMcVersionFromModJarName(modJarName: string) {\r\n    return getStringBetween(modJarName,'mc','-fabric');\r\n    \r\n    // var found = findMcVersion.exec(modJarName);\r\n    // if (found == null) {\r\n    //     return null;\r\n    // }\r\n    // return found[0];\r\n}\r\n\r\ninterface ToDisplay {\r\n    mcVersion: string;\r\n    modVersion: string;\r\n    downloadUrl: string;\r\n    upgradeInfo: string;\r\n    isPreRelease: boolean;\r\n    publishTime: string;\r\n    downloadCount: number;\r\n}\r\n\r\nfunction DownloadTerm(props: { data: ToDisplay }) {\r\n    let { t, i18n } = useTranslation();\r\n\r\n    return <Accordion key={props.data.downloadUrl} style={{ backgroundColor: '#80cbc4', color: 'black' }}>\r\n        <AccordionSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            id={props.data.downloadUrl}\r\n        >\r\n            <Typography>{\r\n                (props.data.isPreRelease ? '[Pre-release] ' : '') + props.data.modVersion\r\n            }</Typography>\r\n        </AccordionSummary>\r\n        <AccordionDetails style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>\r\n            <Typography>{props.data.upgradeInfo}</Typography>\r\n            <div style={{ margin: 10 }} />\r\n            <MyButton onClick={() => {\r\n                window.open(props.data.downloadUrl, '_blank')\r\n            }}>{t('Download')}</MyButton>\r\n            <div style={{ margin: 10 }} />\r\n            <Typography variant='caption'>\r\n                {'Published at ' + props.data.publishTime}\r\n            </Typography>\r\n            <Typography variant='caption'>\r\n                {'Download count (GitHub): ' + props.data.downloadCount}\r\n            </Typography>\r\n        </AccordionDetails>\r\n    </Accordion>;\r\n}\r\n\r\nexport function IPDownload(props: {}) {\r\n    let { t, i18n } = useTranslation();\r\n\r\n    const { data: resultData, complete: resultComplete } = useEndPoint(\r\n        \"https://api.github.com/repos/qouteall/immersiveportalsmod/releases\"\r\n    );\r\n\r\n    if (!resultComplete) {\r\n        return <CircularProgress />\r\n    }\r\n\r\n    const releaseInfo = resultData as unknown as GReleaseInfo[];\r\n\r\n    // console.log(releaseInfo)\r\n\r\n    if (!releaseInfo) {\r\n        return <p>error</p>\r\n    }\r\n\r\n    const toDisplay: ToDisplay[] = releaseInfo\r\n        .map((releaseInfo: GReleaseInfo) => {\r\n            var modJarAssets = releaseInfo.assets.filter(asset => asset.name.indexOf('fabric') >= 0);\r\n            if (modJarAssets.length === 0) {\r\n                return null;\r\n            }\r\n            var asset = modJarAssets[0];\r\n\r\n            const publishDate = releaseInfo.published_at.substr(\r\n                0, releaseInfo.published_at.indexOf('T')\r\n            );\r\n\r\n            return {\r\n                mcVersion: getMcVersionFromModJarName(asset.name),\r\n                modVersion: getModVersionFromModJarName(asset.name),\r\n                downloadUrl: asset.browser_download_url,\r\n                upgradeInfo: releaseInfo.body,\r\n                isPreRelease: releaseInfo.prerelease,\r\n                publishTime: publishDate,\r\n                downloadCount: asset.download_count\r\n            } as ToDisplay;\r\n        })\r\n        .filter(notEmpty);\r\n\r\n    const groupedByMcVersion: Dictionary<ToDisplay[]> = _.groupBy(\r\n        toDisplay,\r\n        (r: ToDisplay) => r.mcVersion\r\n    );\r\n\r\n\r\n    return <div>\r\n        {_.toPairsIn(groupedByMcVersion).map((pair) => {\r\n            const [mcVersion, termList] = pair;\r\n\r\n            const firstRelease: number = termList.findIndex((term) => !term.isPreRelease);\r\n            if (firstRelease !== -1) {\r\n                //remove the first release and insert into the first\r\n                termList.splice(0, 0, ...(termList.splice(firstRelease, 1)))\r\n            }\r\n\r\n            return <Accordion key={pair[0]} style={{ backgroundColor: '#ffd699', color: 'black' }}>\r\n                <AccordionSummary>\r\n                    {mcVersion}\r\n                </AccordionSummary>\r\n\r\n                <AccordionDetails>\r\n                    <div style={{ width: '100%' }}>\r\n                        {termList.map(r => <DownloadTerm data={r} key={r.downloadUrl} />)}\r\n                    </div>\r\n                </AccordionDetails>\r\n            </Accordion>;\r\n        })}\r\n        {/*{toDisplay.map(r => <DownloadTerm data={r}/>)}*/}\r\n    </div>\r\n}","import React, {useRef} from 'react';\r\nimport {Link, useHistory} from \"react-router-dom\";\r\nimport {MyBanner} from \"./MyBanner\";\r\n\r\nimport Card from \"@material-ui/core/Card\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {getIsVerticalMobile, getPublicResourcePath, MyButton, MyRemoteMarkdown} from \"../my_util/Util\";\r\nimport {IPDownload} from \"./IPDownload\";\r\nimport {Typography} from \"@material-ui/core\";\r\n\r\nexport function IPFeatures(props: {}) {\r\n    let {t, i18n} = useTranslation();\r\n    \r\n    const path = t('url_ip_features');\r\n    \r\n    return <MyRemoteMarkdown url={path}/>\r\n    \r\n}\r\n\r\nexport function IPPage(props: {}) {\r\n    let history = useHistory();\r\n    \r\n    let {t, i18n} = useTranslation();\r\n    \r\n    const path = t('url_ip');\r\n    \r\n    // const {data: resultData, complete: resultComplete} = useEndPoint(path);\r\n    \r\n    const downloadSectionRef = useRef(null)\r\n    \r\n    const executeScroll = () => {\r\n        // @ts-ignore\r\n        downloadSectionRef.current.scrollIntoView({behavior: 'smooth'});\r\n    }\r\n    \r\n    const spacing = getIsVerticalMobile() ? 15 : 30;\r\n    \r\n    // const background = 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)';\r\n    \r\n    const background = '#e8eaf6';\r\n    \r\n    return (\r\n        <div className='My-Page'>\r\n            <MyBanner text={t('Immersive Portals')} color='#9500ae'\r\n                      pageIconPath={getPublicResourcePath('/immptl.png')}/>\r\n            \r\n            <div style={{margin: spacing, display: \"flex\", flexDirection: \"column\", justifyContent: \"flex-start\"}}>\r\n                <Card style={{\r\n                    display: 'flex', flexDirection: 'row',\r\n                    justifyContent: 'flex-start', alignItems: 'center',\r\n                    flexWrap: \"wrap\",\r\n                    minHeight: '40vh',\r\n                    background: background,\r\n                    marginBottom: spacing\r\n                }} square={false} elevation={10}>\r\n                    \r\n                    <img src={getPublicResourcePath('/immptl.png')} alt='i am alt' style={{\r\n                        flexGrow: 0,\r\n                        width: 150,\r\n                        margin: 40,\r\n                        marginRight: 0,\r\n                        marginBottom: getIsVerticalMobile() ? 0 : 40\r\n                    }}/>\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        justifyContent: 'space-between',\r\n                        alignSelf: 'stretch',\r\n                        margin: 40,\r\n                        // marginLeft: 0,\r\n                        marginBottom: 20,\r\n                        flexGrow: 1, flexBasis: 0, minWidth: '50vw'\r\n                    }}>\r\n                        \r\n                        <MyRemoteMarkdown url={path}/>\r\n                        \r\n                        <div style={{flexDirection: 'row', justifyContent: 'flex-start'}}>\r\n                            <MyButton style={{backgroundColor: '#35baf6', margin: 10}}\r\n                                      onClick={executeScroll}\r\n                            >\r\n                                {t('ip_download')}\r\n                            </MyButton>\r\n                            \r\n                            <Link to='/immptl/wiki' style={{textDecoration: 'none', color: 'black'}}>\r\n                                <MyButton style={{backgroundColor: '#35baf6', margin: 10}}>\r\n                                    {t('ip_wiki')}\r\n                                </MyButton>\r\n                            </Link>\r\n                            \r\n                            <MyButton style={{backgroundColor: '#35baf6', margin: 10}}\r\n                                      href='https://github.com/qouteall/ImmersivePortalsMod'\r\n                            >\r\n                                {t('Source')}\r\n                            </MyButton>\r\n                        </div>\r\n                    \r\n                    </div>\r\n                </Card>\r\n                \r\n                \r\n                <Card style={{\r\n                    background: background,\r\n                    padding: 20,\r\n                    marginBottom: spacing\r\n                }} elevation={10}>\r\n                    <Typography variant='h6'>{t('Features')}</Typography>\r\n                    <IPFeatures/>\r\n                </Card>\r\n                \r\n                <Card style={{\r\n                    background: background,\r\n                    padding: 20,\r\n                    marginBottom: spacing\r\n                }} elevation={10} ref={downloadSectionRef}>\r\n                    <Typography variant='h5'>{t('ip_downloads')}</Typography>\r\n                    <Link to='immptl/wiki#how-to-install-immersive-portals-mod-fabric-version'>\r\n                        <p>{t('how_to_install')}</p>\r\n                    </Link>\r\n                    <Typography variant='body1'>{t('ip_download_desc')}</Typography>\r\n                    <IPDownload/>\r\n                    <a href='https://www.curseforge.com/minecraft/mc-mods/immersive-portals-mod'>\r\n                        <p>{t('ip_or_curseforge')}</p>\r\n                    </a>\r\n                </Card>\r\n            \r\n            </div>\r\n        \r\n        \r\n        </div>\r\n    );\r\n}","import React, {CSSProperties, useEffect, useRef, useState} from \"react\";\r\n\r\nimport {Transition} from 'react-transition-group';\r\nimport {Button} from \"@material-ui/core\";\r\n\r\nexport const MyClippingCollapse = (props: { shown: boolean, children: any, duration: number }) => {\r\n    const [state, setState] = useState(0);\r\n    \r\n    const domRef = useRef(null as null | HTMLDivElement);\r\n    \r\n    let clipPath: string = '';\r\n    if (state === 0) {\r\n        clipPath = `inset(0% 0% 100% 0%)`;\r\n    } else if (state === 1) {\r\n        let contentHeight = domRef.current?.clientHeight;\r\n        \r\n        if (!contentHeight) {\r\n            contentHeight = 100;\r\n        }\r\n        \r\n        let num = contentHeight - window.innerHeight;\r\n        \r\n        // console.log(num);\r\n        \r\n        if (num < 0) {\r\n            num = 0;\r\n        }\r\n        \r\n        clipPath = `inset(0px 0px ${num}px 0px)`;\r\n    } else if (state === 2) {\r\n        clipPath = 'unset';\r\n    }\r\n    \r\n    useEffect(() => {\r\n        if (props.shown) {\r\n            setState(1);\r\n            setTimeout(() => {\r\n                setState(2);\r\n            }, props.duration);\r\n        }\r\n    }, [props.shown]);\r\n    \r\n    return <div ref={domRef} style={{\r\n        transition: `clip-path ${props.duration}ms ease-in`,\r\n        clipPath: clipPath\r\n    }}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\n// export const MyClippingCollapse = (props: { shown: boolean, children: any, duration: number }) => {\r\n//     const defaultStyle = {\r\n//         transition: `clip-path ${props.duration}ms ease-in`,\r\n//     }\r\n//\r\n//     const clippingCollapseStyle = {\r\n//         // entering: {clipPath: 'circle(100%)',},\r\n//         // entered: {clipPath: 'circle(100%)',},\r\n//         // exiting: {clipPath: 'circle(0%)',},\r\n//         // exited: {clipPath: 'circle(0%)',},\r\n//\r\n//         entering: {clipPath: 'inset(0)',},\r\n//         entered: {clipPath: '',},\r\n//         exiting: {clipPath: 'inset(0 0 100px 0)',},\r\n//         exited: {clipPath: 'inset(0 0 100px 0)',},\r\n//     };\r\n//\r\n//     return (\r\n//         <Transition in={props.shown} timeout={props.duration}>\r\n//             {state => {\r\n//                 // console.log(state)\r\n//                 return (\r\n//                     <div style={{\r\n//                         ...defaultStyle,\r\n//                         // @ts-ignore\r\n//                         ...clippingCollapseStyle[state]\r\n//                     }}>\r\n//                         {props.children}\r\n//                     </div>\r\n//                 );\r\n//             }}\r\n//         </Transition>\r\n//     );\r\n// };\r\n\r\nconst roundStyle = {\r\n    entering: {clipPath: 'circle(100%)',},\r\n    entered: {clipPath: 'circle(100%)',},\r\n    exiting: {clipPath: 'circle(0%)',},\r\n    exited: {clipPath: 'circle(0%)',},\r\n};\r\n\r\nexport const MyRoundAnimation = (props: { shown: boolean, children: any, duration: number }) => {\r\n    const defaultStyle = {\r\n        transition: `clip-path ${props.duration}ms ease-in`,\r\n    }\r\n    \r\n    return (\r\n        <Transition in={props.shown} timeout={props.duration}>\r\n            {state => {\r\n                // console.log(state)\r\n                return (\r\n                    <div style={{\r\n                        ...defaultStyle,\r\n                        // @ts-ignore\r\n                        ...roundStyle[state]\r\n                    }}>\r\n                        {props.children}\r\n                    </div>\r\n                );\r\n            }}\r\n        </Transition>\r\n    );\r\n};","import React, {MutableRefObject, useContext, useEffect, useRef} from \"react\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport LinkIcon from \"@material-ui/icons/Link\";\r\n\r\nexport const WikiContextForHeading = React.createContext({\r\n    isMatureRef: {current: true}\r\n})\r\n\r\nexport function getHeadingFontSize(level: number) {\r\n    let fontSize = 55;\r\n    \r\n    switch (level) {\r\n        case 1:\r\n            fontSize = 36\r\n            break\r\n        case 2:\r\n            fontSize = 32\r\n            break\r\n        case 3:\r\n            fontSize = 27\r\n            break\r\n        case 4:\r\n            fontSize = 22\r\n            break\r\n        case 5:\r\n            fontSize = 20\r\n            break\r\n    }\r\n    return fontSize;\r\n}\r\n\r\nexport function getHeadingColor(level: number) {\r\n    let background = \"#ed4b82\";\r\n    switch (level) {\r\n        case 1:\r\n            background = \"#4dabf5\"\r\n            break\r\n        case 2:\r\n            background = \"#00a152\"\r\n            break\r\n        case 3:\r\n            background = \"#ffac33\"\r\n            break\r\n        case 4:\r\n            background = \"#ed4b82\"\r\n            break\r\n        case 5:\r\n            background = \"#4dabf5\"\r\n            break\r\n    }\r\n    return background;\r\n}\r\n\r\nexport const headingSelectedColor = '#9c27b020';\r\n\r\nexport function WikiHeading(props: { level: number, children: any, node: any }) {\r\n    const myRef: React.MutableRefObject<any> = useRef()\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n    \r\n    const headingHash = props.node.myHeadingHash;\r\n    \r\n    const context = useContext(WikiContextForHeading);\r\n    \r\n    const isMatureRef = context.isMatureRef;\r\n    \r\n    const selectedByUrl = location.hash === headingHash;\r\n    \r\n    useEffect(() => {\r\n        if (location.hash) {\r\n            const scrollFunc = () => {\r\n                if (myRef.current) {\r\n                    const y = myRef.current.getBoundingClientRect().y;\r\n                    if (y < 100 || y > (window.innerHeight || window.outerHeight)) {\r\n                        myRef.current.scrollIntoView({behavior: 'smooth'});\r\n                    }\r\n                }\r\n            };\r\n            \r\n            // console.log(headingHash)\r\n            if (selectedByUrl) {\r\n                if (isMatureRef.current) {\r\n                    scrollFunc()\r\n                } else {\r\n                    let timer = setTimeout(() => {\r\n                        scrollFunc();\r\n                    }, 1000);\r\n                    \r\n                    return () => {\r\n                        clearTimeout(timer);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, [headingHash, location.hash])\r\n    \r\n    const level = props.level;\r\n    const fontSize = getHeadingFontSize(level);\r\n    const background = getHeadingColor(level);\r\n    \r\n    // console.log('what');\r\n    \r\n    return <div id={headingHash} style={{\r\n        display: \"flex\", flexDirection: \"row\", alignItems: \"stretch\",\r\n        position: 'relative'\r\n    }} onClick={(e) => {\r\n        history.push(headingHash);\r\n    }}>\r\n        <div style={{\r\n            position: 'absolute',\r\n            left: selectedByUrl ? 0 : '100%', right: 0, top: 0, bottom: 0,\r\n            transition: \"left 1000ms\",\r\n            background: headingSelectedColor,\r\n            zIndex: -1\r\n        }}/>\r\n        \r\n        <div style={{\r\n            display: \"inline-flex\", width: 5, background: background,\r\n            marginTop: 4, marginBottom: 4, marginRight: 10,\r\n            flexShrink: 0\r\n        }}/>\r\n        <Typography ref={myRef} style={{fontSize: fontSize}}>\r\n            {props.children}\r\n            {/*<IconButton onClick={() => {*/}\r\n            {/*    history.push(headingHash)*/}\r\n            {/*}}>*/}\r\n            {/*    <LinkIcon/>*/}\r\n            {/*</IconButton>*/}\r\n        </Typography>\r\n    \r\n    \r\n    </div>;\r\n}","import React, {\r\n    DOMElement,\r\n    MutableRefObject,\r\n    ReactElement,\r\n    useCallback,\r\n    useContext,\r\n    useEffect,\r\n    useMemo,\r\n    useRef,\r\n    useState\r\n} from \"react\";\r\nimport ReactMarkdown, {ReactMarkdownProps} from \"react-markdown\";\r\n\r\nimport xtend from \"xtend\";\r\n\r\nimport unified from \"unified\";\r\n\r\nimport parse from \"remark-parse\";\r\n\r\n// @ts-ignore\r\nimport naiveHtml from \"react-markdown/lib/plugins/naive-html\"\r\n\r\n// @ts-ignore\r\nimport addListMetadata from \"mdast-add-list-metadata\";\r\n\r\n// @ts-ignore\r\nimport astToReact from \"react-markdown/lib/ast-to-react\";\r\n\r\n// @ts-ignore\r\nimport wrapTableRows from \"react-markdown/lib/wrap-table-rows\";\r\n\r\n// @ts-ignore\r\nimport getDefinitions from \"react-markdown/lib/get-definitions\";\r\n\r\n// @ts-ignore\r\nimport defaultRenderers from \"react-markdown/lib/renderers\";\r\nimport _ from \"lodash/fp\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport {CircularProgress, List} from \"@material-ui/core\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport {ExpandLess, ExpandMore} from \"@material-ui/icons\";\r\nimport {getIsVerticalMobile, getStringBetween} from \"../../my_util/Util\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\nimport Axios, {AxiosResponse} from \"axios\";\r\nimport AnimateHeight from \"react-animate-height\";\r\nimport {MyClippingCollapse} from \"../TestAnimation\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {getHeadingColor, WikiContextForHeading, headingSelectedColor} from \"./WikiHeading\";\r\nimport {removeAssignedHash} from \"./WikiPage\";\r\n\r\n// @ts-ignore\r\n\r\nvar allTypes = Object.keys(defaultRenderers);\r\n\r\ntype Content = Array<HeadingWithContent | Array<Content>>\r\n\r\ninterface HeadingWithContent {\r\n    myType: 'heading_with_content',\r\n    headingElement: any | null,//only the root has null heading\r\n    contents: Array<HeadingWithContent | any>\r\n}\r\n\r\nfunction isHeading(node: any) {\r\n    return node.type === 'heading';\r\n}\r\n\r\nfunction isHeadingWithContent(obj: any): obj is HeadingWithContent {\r\n    return obj.myType === 'heading_with_content';\r\n}\r\n\r\nconst toRemoveFromHash: RegExp = /[!\"#$%&'()*+,./:;<=>?@\\^`{|}~]/g\r\n\r\nexport function headingTextToHash(heading: string) {\r\n    return '#' + heading.toLowerCase().replace(/ /g, '-')\r\n        .replace(toRemoveFromHash, '');\r\n}\r\n\r\nfunction produceHeadingHash(headingNode: any): string {\r\n    // @ts-ignore\r\n    const joined: string = headingNode.children.map(n => n.value).join('');\r\n    \r\n    const assignedHash = getStringBetween(joined, '{#', '}');\r\n    if (assignedHash.length !== 0) {\r\n        return headingTextToHash(assignedHash);\r\n    }\r\n    \r\n    return headingTextToHash(joined);\r\n}\r\n\r\nclass HeadingHierarchyParser {\r\n    children: Array<any>;\r\n    currIndex: number;\r\n    headingDiscriminatorNumbers: Map<string, number>;\r\n    \r\n    constructor(c: Array<any>) {\r\n        this.children = c;\r\n        this.currIndex = 0;\r\n        this.headingDiscriminatorNumbers = new Map();\r\n    }\r\n    \r\n    isEnded(): boolean {\r\n        return this.currIndex >= this.children.length;\r\n    }\r\n    \r\n    parseNonHeadingContents(): Array<any> {\r\n        const headingIndex = _.findIndexFrom(isHeading, this.currIndex, this.children);\r\n        if (headingIndex === -1) {\r\n            const result = this.children.slice(this.currIndex);\r\n            this.currIndex = this.children.length;\r\n            return result;\r\n        }\r\n        const result = this.children.slice(this.currIndex, headingIndex);\r\n        this.currIndex = headingIndex;\r\n        return result;\r\n    }\r\n    \r\n    parseHierarchy(minDepth: number): Array<HeadingWithContent | any> {\r\n        const base: Array<HeadingWithContent | any> = this.parseNonHeadingContents();\r\n        \r\n        while (!this.isEnded()) {\r\n            const currHeading = this.children[this.currIndex];\r\n            const currDepth = currHeading.depth;\r\n            if (currDepth < minDepth) {\r\n                return base;\r\n            }\r\n            this.currIndex += 1;//swallow the header\r\n            \r\n            const remaining = this.parseHierarchy(currDepth + 1);\r\n            \r\n            const originalHeadingHash = produceHeadingHash(currHeading);\r\n            const number = this.headingDiscriminatorNumbers.get(originalHeadingHash);\r\n            let discriminatedHeadingHash;\r\n            if (number !== undefined) {\r\n                this.headingDiscriminatorNumbers.set(originalHeadingHash, number + 1);\r\n                discriminatedHeadingHash = originalHeadingHash + '-' + number;\r\n            } else {\r\n                this.headingDiscriminatorNumbers.set(originalHeadingHash, 1);\r\n                discriminatedHeadingHash = originalHeadingHash;\r\n            }\r\n            currHeading.myHeadingHash = discriminatedHeadingHash;\r\n            \r\n            base.push({myType: 'heading_with_content', headingElement: currHeading, contents: remaining});\r\n        }\r\n        \r\n        return base;\r\n    }\r\n    \r\n    parseDocument(): HeadingWithContent {\r\n        const contents = this.parseHierarchy(0);\r\n        \r\n        return {\r\n            myType: 'heading_with_content',\r\n            headingElement: null,//only the root has null heading\r\n            contents: contents\r\n        };\r\n    }\r\n}\r\n\r\nfunction extractHeadingContentGroup(children: Array<any>): Array<HeadingWithContent | any> {\r\n    \r\n    var result = new HeadingHierarchyParser(children).parseHierarchy(0);\r\n    \r\n    \r\n    return result;\r\n}\r\n\r\nfunction getRendererProps(props: ReactMarkdown.ReactMarkdownProps, tree: any): any {\r\n    var renderers = xtend(defaultRenderers, props.renderers);\r\n    \r\n    var renderProps = xtend(props, {\r\n        renderers: renderers,\r\n        definitions: getDefinitions(tree)\r\n    });\r\n    return renderProps;\r\n}\r\n\r\nexport async function myParseMarkdownAsync(props: ReactMarkdownProps) {\r\n    var src = props.source || props.children || '';\r\n    \r\n    var processor = unified().use(parse).use(props.plugins || []); // eslint-disable-next-line no-sync\r\n    \r\n    var tree = await processor.run(processor.parse(src));\r\n    \r\n    tree = wrapTableRows(tree);\r\n    \r\n    tree = addListMetadata()(tree);\r\n    \r\n    tree = naiveHtml(tree);\r\n    \r\n    // console.log(tree)\r\n    \r\n    return tree;\r\n}\r\n\r\n// function WikiSection(props: { index: number, data: Array<any>, renderOptions: any }) {\r\n//     // const scrollNotifier = useContext(ScrollNotifierContext);\r\n//     const myRef = useRef(null);\r\n//\r\n//     // console.log(\"woops\")\r\n//\r\n//     return <div ref={myRef}>{\r\n//         props.data.map((item: any, index: number) => {\r\n//             if (isHeadingWithContent(item)) {\r\n//                 const childIndex: number = item.headingElement.position.start.line;\r\n//                 return <React.Fragment key={index}>\r\n//                     {astToReact(item.headingElement, props.renderOptions)}\r\n//                     <WikiSection index={childIndex} key={childIndex} data={item.contents}\r\n//                                  renderOptions={props.renderOptions}/>\r\n//                 </React.Fragment>\r\n//             } else {\r\n//                 return astToReact(item, props.renderOptions);\r\n//             }\r\n//         })\r\n//     }</div>;\r\n// }\r\n\r\nfunction RightBarSection(props: {\r\n    outerSelectedHash: string, item: HeadingWithContent, layer: number,\r\n    setOuterSelected: null | ((cond: boolean) => void),\r\n    onTitleClick: () => void,\r\n    onViewed: (termDom: HTMLDivElement) => void\r\n}) {\r\n    let [opened, setOpened] = useState(false);\r\n    let [selected, setSelected] = useState(false);\r\n    \r\n    const location = useLocation();\r\n    const history = useHistory()\r\n    \r\n    const item = props.item;\r\n    \r\n    const headingHash = item.headingElement.myHeadingHash;\r\n    \r\n    // console.log(headingHash);\r\n    \r\n    const hasContent = item.contents.findIndex(w => isHeadingWithContent(w)) !== -1;\r\n    \r\n    const domRef = useRef(null as (null | HTMLDivElement));\r\n    \r\n    useEffect(() => {\r\n        const viewed = props.outerSelectedHash === headingHash;\r\n        \r\n        setSelected(viewed);\r\n        \r\n        if (props.setOuterSelected) {\r\n            props.setOuterSelected(viewed);\r\n        }\r\n        \r\n        if (viewed) {\r\n            if (domRef.current) {\r\n                props.onViewed(domRef.current);\r\n            }\r\n        }\r\n    }, [headingHash, props.outerSelectedHash]);\r\n    \r\n    // @ts-ignore\r\n    let toDisplay: string = item.headingElement.children.map(s => s.value).join(' ');\r\n    \r\n    // remove for example {#hash}\r\n    toDisplay = removeAssignedHash(toDisplay);\r\n    \r\n    // cut if too long\r\n    if (toDisplay.length > 60) {\r\n        toDisplay = toDisplay.substr(0, 60) + '...';\r\n    }\r\n    \r\n    const headingColor = getHeadingColor(item.headingElement.depth);\r\n    \r\n    return <React.Fragment key={headingHash}>\r\n        <ListItem ref={domRef} button style={{\r\n            padding: 3, paddingLeft: props.layer * 10 + 10,\r\n            display: \"flex\", flexDirection: \"row\", alignItems: \"stretch\",\r\n            backgroundColor: (location.hash === headingHash) ? headingSelectedColor : undefined\r\n        }} selected={selected} onClick={() => {\r\n            if (!(opened && hasContent)) {\r\n                history.push(headingHash);\r\n                \r\n                props.onTitleClick();\r\n            }\r\n            \r\n            setOpened(!opened);\r\n        }}>\r\n            <div style={{\r\n                display: \"inline-flex\", width: 5, background: headingColor,\r\n                marginTop: 1, marginBottom: 0, marginRight: 5,\r\n                flexShrink: 0\r\n            }}/>\r\n            {toDisplay}\r\n            {hasContent && (opened ? <ExpandMore/> : <ExpandLess/>)}\r\n        </ListItem>\r\n        {hasContent && <Collapse in={opened} timeout={200}>\r\n            <List dense={true} style={{padding: 0}}>\r\n                {item.contents.map((w, index) => {\r\n                    if (!isHeadingWithContent(w)) {\r\n                        return undefined;\r\n                    }\r\n                    return <RightBarSection\r\n                        key={index}\r\n                        outerSelectedHash={props.outerSelectedHash}\r\n                        item={w}\r\n                        layer={props.layer + 1}\r\n                        setOuterSelected={(cond) => {\r\n                            setSelected(cond);\r\n                            \r\n                            if (cond) {\r\n                                setOpened(true);\r\n                            }\r\n                            \r\n                            if (props.setOuterSelected) {\r\n                                props.setOuterSelected(cond);\r\n                            }\r\n                        }}\r\n                        onTitleClick={props.onTitleClick}\r\n                        onViewed={props.onViewed}\r\n                    />;\r\n                })}\r\n            </List>\r\n        </Collapse>}\r\n    </React.Fragment>;\r\n}\r\n\r\ninterface HeadingRef {\r\n    headingHash: string,// has '#'\r\n    element: HTMLElement\r\n}\r\n\r\nfunction getHeadingRefs(result: Array<HeadingRef>, hierarchy: Array<any>) {\r\n    // console.log(hierarchy);\r\n    hierarchy.forEach((item) => {\r\n        if (isHeadingWithContent(item)) {\r\n            const headingHash = item.headingElement.myHeadingHash;\r\n            const element = document.getElementById(headingHash);\r\n            if (element !== null) {\r\n                result.push({\r\n                    headingHash: headingHash,\r\n                    element: element\r\n                });\r\n            } else {\r\n                console.error('cannot find ' + headingHash)\r\n            }\r\n            \r\n            getHeadingRefs(result, item.contents)\r\n        }\r\n    })\r\n}\r\n\r\n// const MemoedWikiSection = React.memo(WikiSection);\r\n\r\nfunction FlatWikiSection(props: { root: any, renderOptions: any }) {\r\n    const isMatureRef = useRef(false);\r\n    \r\n    // console.log(\"flat\")\r\n    \r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            isMatureRef.current = true;\r\n        }, 1000);\r\n    }, []);\r\n    \r\n    return <WikiContextForHeading.Provider value={{isMatureRef: isMatureRef}}>\r\n        {astToReact(props.root, props.renderOptions)}\r\n    </WikiContextForHeading.Provider>;\r\n}\r\n\r\nconst MemoedFlatWikiSection = React.memo(FlatWikiSection);\r\n\r\nconst MemoedRightBarSection = React.memo(RightBarSection);\r\n\r\nexport function useWikiContent(\r\n    contentUrl: string,\r\n    renderers: any, plugins: any,\r\n    scrollDomRef: MutableRefObject<DOMElement<any, any>>,\r\n    fallbackUrl: string,\r\n    rightBarScrollRef: MutableRefObject<null | HTMLDivElement>\r\n): {\r\n    wikiContentComponent: ReactElement,\r\n    rightBarComponent: ReactElement,\r\n    updateScrollFunc: () => void,\r\n} {\r\n    let reactMarkdownProps: ReactMarkdownProps = {\r\n        renderers: renderers, plugins: plugins,\r\n        children: 'loading markdown'\r\n    };\r\n    \r\n    const [tree, setTree] = useState(null);\r\n    \r\n    const [errorLoading, setErrorLoading] = useState(false);\r\n    \r\n    const [isAwaitingTranslation, setIsAwaitingTranslation] = useState(false);\r\n    \r\n    const [rightBarEnabled, setRightBarEnabled] = useState(false);\r\n    \r\n    const hierarchyRef: MutableRefObject<null | Array<HeadingWithContent | any>> =\r\n        useRef(null);\r\n    \r\n    const renderPropsRef = useRef(null);\r\n    \r\n    useEffect(() => {\r\n        async function doParseWikiContent() {\r\n            let markdownResult: AxiosResponse<any>;\r\n            try {\r\n                markdownResult = await Axios({\r\n                    url: isAwaitingTranslation ? fallbackUrl : contentUrl\r\n                });\r\n            } catch (e) {\r\n                setErrorLoading(true);\r\n                return;\r\n            }\r\n            \r\n            if (!isAwaitingTranslation) {\r\n                if (markdownResult.data === \"awaiting translation\") {\r\n                    setIsAwaitingTranslation(true);\r\n                    return;\r\n                }\r\n            }\r\n            \r\n            let parsedMarkdown = await myParseMarkdownAsync({\r\n                // @ts-ignore\r\n                renderer: renderers, plugins: plugins,\r\n                children: markdownResult.data\r\n            });\r\n            \r\n            // @ts-ignore\r\n            hierarchyRef.current = extractHeadingContentGroup(parsedMarkdown.children);\r\n            \r\n            renderPropsRef.current = getRendererProps(reactMarkdownProps, parsedMarkdown);\r\n            \r\n            // @ts-ignore\r\n            setTree(parsedMarkdown);\r\n            setErrorLoading(false);\r\n            \r\n            // console.log(parsedMarkdown)\r\n        }\r\n        \r\n        doParseWikiContent()\r\n        \r\n        setTimeout(() => setRightBarEnabled(true), 1200);\r\n    }, [contentUrl, isAwaitingTranslation]);\r\n    \r\n    const rendererProps: any = renderPropsRef.current;\r\n    \r\n    // @ts-ignore\r\n    const hierarchy = hierarchyRef.current;\r\n    \r\n    const [viewingSectionHash, setViewingSectionHash] = useState('');\r\n    \r\n    const wikiContents = hierarchy === null ? undefined :\r\n        <MemoedFlatWikiSection root={tree} renderOptions={rendererProps}/>;\r\n    \r\n    const enableSectionUpdate = useRef(true);\r\n    const timerRef = useRef(null);\r\n    \r\n    useEffect(() => () => {\r\n        // @ts-ignore\r\n        clearTimeout(timerRef.current);\r\n    }, []);\r\n    \r\n    const headingRefs = useRef([]);\r\n    \r\n    useEffect(() => {\r\n        if (hierarchy !== null) {\r\n            const result: HeadingRef[] = [];\r\n            getHeadingRefs(result, hierarchy);\r\n            // @ts-ignore\r\n            headingRefs.current = result;\r\n            \r\n            // console.log(result);\r\n        }\r\n    }, [hierarchy]);\r\n    \r\n    \r\n    const doUpdateScroll = () => {\r\n        if (getIsVerticalMobile()) {\r\n            setViewingSectionHash('');\r\n            return;\r\n        }\r\n        \r\n        if (!scrollDomRef.current) {\r\n            return;\r\n        }\r\n        \r\n        if (!enableSectionUpdate.current) {\r\n            return;\r\n        }\r\n        \r\n        // console.log(\"scroll updating\")\r\n        \r\n        let active: HeadingRef | null = null;\r\n        \r\n        // @ts-ignore\r\n        const scrollTop: number = scrollDomRef.current.scrollTop;\r\n        // @ts-ignore\r\n        const scrollHeight: number = scrollDomRef.current.scrollHeight;\r\n        \r\n        var screenHeight = document.documentElement.clientHeight;\r\n        \r\n        const scrollPosition = ((scrollTop / (scrollHeight - screenHeight) * scrollHeight))\r\n        \r\n        for (let i = headingRefs.current.length - 1; i >= 0; i -= 1) {\r\n            \r\n            const item: HeadingRef = headingRefs.current[i];\r\n            \r\n            if (item.element &&\r\n                item.element.offsetTop <\r\n                scrollPosition + screenHeight / 4\r\n            ) {\r\n                active = item;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        if (active !== null && viewingSectionHash !== active.headingHash) {\r\n            setViewingSectionHash(active.headingHash);\r\n        }\r\n    };\r\n    \r\n    const updateScrollMemoed = useCallback(doUpdateScroll, [viewingSectionHash]);\r\n    \r\n    const titles = (hierarchy !== null && rightBarEnabled) ? <List dense={true} style={{\r\n        fontSize: 16\r\n    }}>\r\n        {hierarchy.map((v, index) => {\r\n            if (!isHeadingWithContent(v)) {\r\n                return undefined;\r\n            }\r\n            \r\n            return <MemoedRightBarSection\r\n                outerSelectedHash={viewingSectionHash}\r\n                item={v}\r\n                layer={0}\r\n                key={index}\r\n                setOuterSelected={null}\r\n                onTitleClick={() => {\r\n                    enableSectionUpdate.current = false;\r\n                    // @ts-ignore\r\n                    timerRef.current = setTimeout(() => {\r\n                        enableSectionUpdate.current = true;\r\n                        updateScrollMemoed();\r\n                    }, 2000);\r\n                }}\r\n                onViewed={(termDom) => {\r\n                    if (rightBarScrollRef.current) {\r\n                        const termY = termDom.getBoundingClientRect().y;\r\n                        \r\n                        if (termY > 100 && ((termY + 200) < window.outerHeight)) {\r\n                            //visible\r\n                        } else {\r\n                            //invisible\r\n                            const scrollClientTop = rightBarScrollRef.current?.getBoundingClientRect().y;\r\n                            const scrollTop = rightBarScrollRef.current?.scrollTop || 0;\r\n                            const offset = termY - scrollClientTop + scrollTop;\r\n                            \r\n                            rightBarScrollRef.current?.scrollTo({top: offset - 200, behavior: 'smooth'});\r\n                        }\r\n                    }\r\n                }}\r\n            />;\r\n        })}\r\n    </List> : <></>;\r\n    \r\n    let location = useLocation();\r\n    \r\n    return {\r\n        wikiContentComponent: <div>\r\n            {/*<Collapse in={tree!==null} timeout={duration}>*/}\r\n            {/*    {wikiContents}*/}\r\n            {/*</Collapse>*/}\r\n            <MyClippingCollapse shown={tree !== null} duration={1000}>\r\n                {wikiContents}\r\n            </MyClippingCollapse>\r\n            {errorLoading && <Typography>\r\n                {'error loading ' + contentUrl}\r\n            </Typography>}\r\n            {(tree === null && !errorLoading) &&\r\n            <CircularProgress/>\r\n            }\r\n        </div>,\r\n        rightBarComponent: titles,\r\n        updateScrollFunc: updateScrollMemoed\r\n    };\r\n}\r\n\r\n","import {Link, useHistory, useLocation} from \"react-router-dom\";\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport {ListItem} from \"@material-ui/core\";\r\nimport {MyButton} from \"../../my_util/Util\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport DetailsIcon from \"@material-ui/icons/Details\";\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport BookIcon from '@material-ui/icons/Book';\r\n\r\nexport const WikiToSideBarContext = React.createContext({\r\n    onTermClicked: () => {\r\n    }\r\n});\r\n\r\nfunction processLink(url: string): string {\r\n    return url.substr(url.indexOf('/wiki'))\r\n}\r\n\r\nexport function getLocalWikiUrlFromGithubWikiUrl(githubWikiUrl: string) {\r\n    const processed = processLink(githubWikiUrl);\r\n    return '/immptl' + processed;\r\n}\r\n\r\n// function getRandomColor(): string {\r\n//     const num = Math.floor(Math.random() * 3);\r\n//\r\n//     if (num === 0) {\r\n//         return '#9500ae';\r\n//     } else if (num === 1) {\r\n//         return ;\r\n//     } else {\r\n//         return '#e64a19';\r\n//     }\r\n// }\r\n\r\nexport function MySidebarLink(props: { url: string, children: any }) {\r\n    // const history = useHistory();\r\n    \r\n    const location = useLocation();\r\n    \r\n    var githubWikiUrl = props.url;\r\n    var localUrl = getLocalWikiUrlFromGithubWikiUrl(githubWikiUrl);\r\n    \r\n    var context = useContext(WikiToSideBarContext);\r\n    \r\n    // const [iconColor, setIconColor] = useState(getRandomColor());\r\n    \r\n    const selected = location.pathname === localUrl;\r\n    \r\n    return <Link to={localUrl} style={{textDecoration: 'none', color: 'black'}}>\r\n        <ListItem selected={selected} button onClick={(e) => {\r\n            context.onTermClicked()\r\n            // history.push(localUrl);\r\n        }} style={{paddingLeft: 5}}>\r\n            <DescriptionIcon style={{marginRight: 5, color: selected?'#e64a19':'#3f51b5'}}/>\r\n            {props.children}\r\n        </ListItem>\r\n    </Link>;\r\n}\r\n\r\n// export const sidebarMarkdownRenderers = {\r\n//     link: (a: any) => {\r\n//         return <MySidebarLink url={a.href}>{a.children}</MySidebarLink>;\r\n//     },\r\n//     paragraph: (a: any) => a.children\r\n// }\r\n\r\nexport function MyLinkInWiki(props: { targetLink: string, children: any }) {\r\n    let history = useHistory();\r\n    \r\n    let {t, i18n} = useTranslation();\r\n    \r\n    if (props.targetLink.indexOf('github.com/qouteall/ImmersivePortalsMod/wiki') !== -1) {\r\n        //inner link\r\n        \r\n        const localWikiUrlFromGithubWikiUrl = getLocalWikiUrlFromGithubWikiUrl(props.targetLink);\r\n        \r\n        return <Link to={localWikiUrlFromGithubWikiUrl} style={{color:\"#205723\"}}>\r\n                {props.children}\r\n        </Link>\r\n    } else {\r\n        //outer link\r\n        return <a href={props.targetLink}>{props.children}</a>\r\n    }\r\n}","import React, {useCallback, useContext, useEffect, useState} from \"react\";\r\nimport {Octokit} from \"@octokit/core\";\r\nimport {\r\n    Button, Card, CardActionArea,\r\n    CircularProgress, Collapse,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle, List, ListItem,\r\n    TextField, Typography\r\n} from \"@material-ui/core\";\r\nimport {getCurrentLanguage, MyButton, useEndPoint} from \"../../my_util/Util\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport {headingTextToHash} from \"./WikiContent\";\r\nimport {wikiMarkdownRenderers} from \"./WikiPage\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport {ExpandLess, ExpandMore} from \"@material-ui/icons\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport {Link, useHistory} from \"react-router-dom\";\r\n\r\nconst gfm = require('remark-gfm')\r\n\r\nconst octokit = new Octokit({});\r\n\r\nexport async function testSearch() {\r\n    return searchAndFindCorrelatedFiles('portal', 'qouteall/imm_ptl_wiki_copy')\r\n}\r\n\r\nexport async function searchAndFindCorrelatedFiles(keyword: string, githubRepo: string): Promise<Array<string>> {\r\n    console.log(\"triggered\")\r\n    const result = await octokit.request('GET /search/code', {\r\n        q: `${keyword} repo:${githubRepo}`\r\n    })\r\n    \r\n    console.log(result);\r\n    \r\n    if (result.status !== 200) {\r\n        console.log(\"searching failed\");\r\n        throw Error(\"searching failed\");\r\n    }\r\n    \r\n    const items = result.data.items;\r\n    let paths: Array<string> = items.map((term) => term.path);\r\n    \r\n    return paths;\r\n    \r\n}\r\n\r\nexport interface SearchingContextType {\r\n    onClicked: () => void\r\n}\r\n\r\nexport const SearchingContext = React.createContext({\r\n    onClicked: () => {\r\n    }\r\n} as SearchingContextType);\r\n\r\nfunction isFileIncludedInSearch(filePathInRepo: string, language: string): boolean {\r\n    if (filePathInRepo.indexOf('LeftBar') !== -1) {\r\n        return false;\r\n    }\r\n    if (filePathInRepo.indexOf('Sidebar') !== -1) {\r\n        return false;\r\n    }\r\n    \r\n    const index = filePathInRepo.indexOf('/');\r\n    let fileLanguage;\r\n    if (index === -1) {\r\n        fileLanguage = 'en';\r\n    } else {\r\n        fileLanguage = filePathInRepo.substr(0, index);\r\n    }\r\n    \r\n    return language.startsWith(fileLanguage) || fileLanguage.startsWith(language);\r\n}\r\n\r\ntype SearchingState = 'ready' | 'loading' | 'finished' | 'error';\r\n\r\nconst contentPrefix = 'https://qouteall.fun/imm_ptl_wiki_copy/';\r\n\r\n\r\nfunction getIndicesOf(keyword: string, str: string, caseSensitive: boolean): Array<number> {\r\n    const keywordLen = keyword.length;\r\n    if (keywordLen === 0) {\r\n        return [];\r\n    }\r\n    let startIndex = 0;\r\n    let index;\r\n    let indices = [];\r\n    if (!caseSensitive) {\r\n        str = str.toLowerCase();\r\n        keyword = keyword.toLowerCase();\r\n    }\r\n    while ((index = str.indexOf(keyword, startIndex)) > -1) {\r\n        indices.push(index);\r\n        startIndex = index + keywordLen;\r\n    }\r\n    return indices;\r\n}\r\n\r\ninterface SearchingSectionData {\r\n    filePath: string,\r\n    previewText: string,\r\n    headingHash: string\r\n}\r\n\r\nfunction filePathToPagePath(filePath: string): string {\r\n    let result = filePath;\r\n    const slashIndex = result.indexOf('/');\r\n    if (slashIndex !== -1) {\r\n        result = result.substr(slashIndex + 1);\r\n    }\r\n    \r\n    const dotIndex = result.lastIndexOf('.');\r\n    if (dotIndex !== -1) {\r\n        result = result.substr(0, dotIndex);\r\n    }\r\n    \r\n    if (result.toLowerCase() === 'home') {\r\n        return '';\r\n    }\r\n    \r\n    return '/' + result;\r\n}\r\n\r\nfunction extractSearchingSectionDatas(\r\n    fileContent: string,\r\n    filePath: string,\r\n    keyword: string\r\n): Array<SearchingSectionData> {\r\n    \r\n    let occurences: Array<number> = getIndicesOf(keyword, fileContent, false);\r\n    \r\n    let result = [] as Array<SearchingSectionData>;\r\n    \r\n    let lastLineBreakIndex = -2;// avoid duplication\r\n    \r\n    for (const index of occurences) {\r\n        let lineBreakIndexBehind = fileContent.indexOf('\\n', index);\r\n        if (lineBreakIndexBehind === -1) {\r\n            lineBreakIndexBehind = fileContent.length;\r\n        }\r\n        \r\n        let lineBreakIndexFront = fileContent.lastIndexOf('\\n', index);\r\n        if (lineBreakIndexFront === -1) {\r\n            lineBreakIndexFront = -1;\r\n        }\r\n        \r\n        if (lastLineBreakIndex === lineBreakIndexFront) {\r\n            lastLineBreakIndex = lineBreakIndexFront;\r\n            continue;\r\n        }\r\n        lastLineBreakIndex = lineBreakIndexFront;\r\n        \r\n        const previewText = fileContent.substr(\r\n            lineBreakIndexFront + 1, lineBreakIndexBehind - lineBreakIndexFront - 1\r\n        );\r\n        \r\n        const poundIndex = fileContent.lastIndexOf('#', index);\r\n        let headingHash = '';\r\n        if (poundIndex !== -1) {\r\n            let headingEndIndex = fileContent.indexOf('\\n', poundIndex);\r\n            if (headingEndIndex === -1) {\r\n                headingEndIndex = fileContent.length;\r\n            }\r\n            headingHash = fileContent.substr(poundIndex + 1, headingEndIndex - poundIndex - 1);\r\n            headingHash = headingHash.trimStart();\r\n            var coerceHashMarkIndex = headingHash.indexOf('{#');\r\n            if (coerceHashMarkIndex !== -1) {\r\n                headingHash = headingHash.substr(\r\n                    coerceHashMarkIndex + 1,\r\n                    headingHash.lastIndexOf('}') - coerceHashMarkIndex - 1\r\n                );\r\n            } else {\r\n                headingHash = headingTextToHash(headingHash);\r\n            }\r\n        }\r\n        \r\n        result.push({\r\n            filePath: filePath,\r\n            previewText: previewText,\r\n            headingHash: headingHash\r\n        });\r\n    }\r\n    \r\n    return result;\r\n    \r\n}\r\n\r\nconst pathStart = '/immptl/wiki'\r\n\r\nfunction SearchingResultSection(props: {\r\n    data: SearchingSectionData,\r\n    keyword: string\r\n}) {\r\n    let history = useHistory();\r\n    let context = useContext(SearchingContext);\r\n    \r\n    const pagePath = filePathToPagePath(props.data.filePath);\r\n    const link = pathStart + pagePath + props.data.headingHash;\r\n    \r\n    return <Card elevation={5} style={{margin: 5, width: '100%'}}>\r\n        \r\n        <Link to={link} style={{textDecoration: 'none', color: 'black'}} onClick={context.onClicked}>\r\n            <CardActionArea style={{fontSize: 'unset'}}>\r\n                \r\n                {/*@ts-ignore*/}\r\n                <ReactMarkdown plugins={[gfm]} renderers={wikiMarkdownRenderers}>\r\n                    {props.data.previewText}\r\n                </ReactMarkdown>\r\n            \r\n            </CardActionArea>\r\n        </Link>\r\n    \r\n    </Card>\r\n}\r\n\r\nfunction SearchingResultFileEntry(props: {\r\n    keyword: string, filePath: string\r\n}) {\r\n    const filePath = contentPrefix + props.filePath;\r\n    const {complete, data, error, pending} = useEndPoint(filePath);\r\n    let [sectionDatas, setSectionDatas] = useState([] as Array<SearchingSectionData>);\r\n    let [opened, setOpened] = useState(true);\r\n    \r\n    useEffect(() => {\r\n        if (complete) {\r\n            setSectionDatas(extractSearchingSectionDatas(\r\n                data as unknown as string, props.filePath, props.keyword\r\n            ));\r\n        } else {\r\n            setSectionDatas([]);\r\n        }\r\n    }, [complete])\r\n    \r\n    return <div style={{display: 'flex', flexDirection: 'column'}}>\r\n        <ListItem style={{alignSelf: 'stretch', display: 'flex', flexDirection: 'row'}}\r\n                  button onClick={() => setOpened(!opened)}\r\n        >\r\n            <DescriptionIcon style={{color: '#3f51b5'}}/>\r\n            <Typography>{props.filePath}</Typography>\r\n            {opened ? <ExpandMore/> : <ExpandLess/>}\r\n        </ListItem>\r\n        {error && 'error loading ' + filePath}\r\n        {pending && <CircularProgress/>}\r\n        <Collapse in={opened}>\r\n            <div style={{\r\n                display: 'flex', flexDirection: 'column', alignItems: 'stretch', alignSelf: 'stretch',\r\n                padding: 10\r\n            }}>\r\n                {sectionDatas.map((data, index) =>\r\n                    <SearchingResultSection data={data} keyword={props.keyword} key={index}/>\r\n                )}\r\n            </div>\r\n        </Collapse>\r\n    \r\n    </div>;\r\n}\r\n\r\nexport function SearchingDialogComponent(props: {\r\n    enabled: boolean, close: () => void\r\n}) {\r\n    let [keyword, setKeyword] = useState('');\r\n    let [currState, setCurrState] = useState('ready' as SearchingState);\r\n    let [filePaths, setFilePaths] = useState([] as Array<string>);\r\n    \r\n    async function doSearchAsync() {\r\n        console.log(\"started searching\" + keyword);\r\n        \r\n        let paths: Array<string>;\r\n        try {\r\n            paths = await searchAndFindCorrelatedFiles(keyword, 'qouteall/imm_ptl_wiki_copy');\r\n        } catch (e) {\r\n            setCurrState('error');\r\n            return;\r\n        }\r\n        \r\n        const filteredPaths = paths.filter(value => isFileIncludedInSearch(value, getCurrentLanguage()))\r\n        \r\n        setCurrState('finished');\r\n        setFilePaths(filteredPaths);\r\n    }\r\n    \r\n    let doSearch = () => {\r\n        if (keyword.length === 0) {\r\n            return;\r\n        }\r\n        \r\n        setCurrState('loading');\r\n        setFilePaths([]);\r\n        \r\n        doSearchAsync();\r\n    }\r\n    \r\n    doSearch = useCallback(doSearch, [keyword, setCurrState, setFilePaths]);\r\n    \r\n    return <Dialog\r\n        open={props.enabled}\r\n        onClose={props.close}\r\n        maxWidth='md'\r\n        fullWidth={true}\r\n    >\r\n        <DialogTitle>{\"Search\"}</DialogTitle>\r\n        <div style={{display: 'flex', flexDirection: 'row', margin: 20}}>\r\n            <TextField autoFocus fullWidth onChange={event => setKeyword(event.target.value)} onKeyUp={(event) => {\r\n                if (event.key === \"Enter\") {\r\n                    doSearch();\r\n                }\r\n            }}/>\r\n            <Button onClick={doSearch}>\r\n                <SearchIcon/>\r\n            </Button>\r\n        </div>\r\n        \r\n        {currState === 'finished' && <div style={{margin: 20}}>\r\n            <div style={{display: 'flex', alignItems: 'stretch', flexDirection: 'column'}}>\r\n                {filePaths.map(filePath => <SearchingResultFileEntry\r\n                    key={filePath} keyword={keyword} filePath={filePath}\r\n                />)}\r\n            </div>\r\n            {filePaths.length === 0 && 'No Result'}\r\n        </div>}\r\n        \r\n        {currState === 'loading' && <CircularProgress style={{margin: 20}}/>}\r\n        {currState === 'error' && 'error'}\r\n    \r\n    \r\n    </Dialog>;\r\n}","import React, {DOMElement, useEffect, useRef, useState} from \"react\";\r\nimport {MyBanner} from \"../MyBanner\";\r\nimport {CircularProgress, List, ListItem} from \"@material-ui/core\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport {\r\n    getIsVerticalMobile,\r\n    getPublicResourcePath,\r\n    getStringAfter,\r\n    baseMarkdownRenderers,\r\n    useEndPoint\r\n} from \"../../my_util/Util\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {useLocation} from \"react-router-dom\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport {myParseMarkdownAsync, useWikiContent} from \"./WikiContent\";\r\nimport {\r\n    getLocalWikiUrlFromGithubWikiUrl,\r\n    MyLinkInWiki, MySidebarLink,\r\n    WikiToSideBarContext\r\n} from \"./WikiSidebar\";\r\nimport {WikiHeading} from \"./WikiHeading\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport {SearchingContext, SearchingDialogComponent} from \"./WikiSearching\";\r\n\r\nconst gfm = require('remark-gfm')\r\n\r\n//both github wiki url and this website url\r\nfunction getMdUrlFromWikiUrl(url: string, head: string) {\r\n    var innerPath = getStringAfter(url, '/wiki');\r\n    \r\n    if (innerPath.length === 0) {\r\n        return head + '/Home.md';\r\n    }\r\n    \r\n    return head + innerPath + '.md';\r\n}\r\n\r\nexport function removeAssignedHash(text: string) {\r\n    let i = text.indexOf('{#');\r\n    if (i !== -1) {\r\n        return text.slice(0, i);\r\n    }\r\n    \r\n    return text;\r\n}\r\n\r\nexport const wikiMarkdownRenderers = {\r\n    ...baseMarkdownRenderers,\r\n    text: (a: any) => {\r\n        let text: string = a.value;\r\n        return removeAssignedHash(text);\r\n    },\r\n    table: (a: any) => {\r\n        return <Table>{a.children}</Table>\r\n    },\r\n    tableHead: (a: any) => <TableHead>{a.children}</TableHead>,\r\n    tableRow: (a: any) => <TableRow>{a.children}</TableRow>,\r\n    tableBody: (a: any) => <TableBody>{a.children}</TableBody>,\r\n    tableCell: (a: any) => <TableCell>{a.children}</TableCell>,\r\n    link: (a: any) => {\r\n        return <MyLinkInWiki targetLink={a.href}>{a.children}</MyLinkInWiki>\r\n    },\r\n    heading: (a: any) => {\r\n        return <WikiHeading level={a.level} node={a.node}>{a.children}</WikiHeading>\r\n    },\r\n    code: (a: any) => {\r\n        return <pre style={{\r\n            margin: 5, padding: 5,\r\n            overflowX: 'auto',\r\n            background: '#eaeaea'\r\n        }}>\r\n            <code>{a.value}</code>\r\n        </pre>\r\n    },\r\n    inlineCode: (a: any) => {\r\n        return <code style={{\r\n            background: '#eaeaea'\r\n        }}>{a.value}</code>\r\n    }\r\n}\r\n\r\ninterface WikiPageEntry {\r\n    title: string,\r\n    url: string\r\n}\r\n\r\nfunction parseWikiPageEntries(result: Array<WikiPageEntry>, node: any) {\r\n    if (node.type === 'link') {\r\n        let newEntry: WikiPageEntry = {\r\n            title: node.children[0].value,\r\n            url: node.url\r\n        };\r\n        \r\n        result.push(newEntry);\r\n    }\r\n    \r\n    if (node.children) {\r\n        for (let c of node.children) {\r\n            parseWikiPageEntries(result, c);\r\n        }\r\n    }\r\n    \r\n    return null;\r\n}\r\n\r\nexport function IPWikiPage() {\r\n    let {t, i18n} = useTranslation();\r\n    \r\n    let location = useLocation();\r\n    \r\n    const wikiContentUrl = getMdUrlFromWikiUrl(location.pathname, t('url_wiki_content_prefix'));\r\n    const fallbackWikiContentUrl = getMdUrlFromWikiUrl(location.pathname, \"https://qouteall.fun/imm_ptl_wiki_copy\");\r\n    \r\n    const [wikiTitle, setWikiTitle] = useState('Loading...');\r\n    \r\n    const [wikiPageEntries, setWikiPageEntries] = useState([] as WikiPageEntry[]);\r\n    \r\n    const [isDrawerOpen, setIsDrawerOpen] = useState(false);\r\n    \r\n    const [isPageNotFound, setIsPageNotFound] = useState(false);\r\n    \r\n    const sidebarUrl = t('url_wiki_sidebar');\r\n    const {data: sideBarData, complete: sidebarComplete} = useEndPoint(sidebarUrl);\r\n    \r\n    const [isSearchingDialogShown, setSearchingDialogShown] = useState(false);\r\n    \r\n    useEffect(() => {\r\n        async function doParseLeftbar() {\r\n            if (sideBarData === null) {\r\n                return;\r\n            }\r\n            \r\n            const node = await myParseMarkdownAsync({children: sideBarData as unknown as string});\r\n            \r\n            let newPageEntries: Array<WikiPageEntry> = [];\r\n            parseWikiPageEntries(newPageEntries, node);\r\n            \r\n            setWikiPageEntries(newPageEntries);\r\n            \r\n            let result = newPageEntries.find(entry =>\r\n                getLocalWikiUrlFromGithubWikiUrl(entry.url) === location.pathname\r\n            );\r\n            \r\n            if (result) {\r\n                setIsPageNotFound(false);\r\n                setWikiTitle(result.title);\r\n            } else {\r\n                setIsPageNotFound(true);\r\n            }\r\n        }\r\n        \r\n        doParseLeftbar();\r\n    }, [location.pathname, sidebarComplete]);\r\n    \r\n    const leftBarComponent = <WikiToSideBarContext.Provider value={{\r\n        onTermClicked: () => setIsDrawerOpen(false)\r\n    }}>\r\n        <Typography variant='h5' style={{margin: 10, marginBottom: 0, marginLeft: 15}}>\r\n            {t('Pages')}\r\n        </Typography>\r\n        <Divider style={{margin: 10}}/>\r\n        \r\n        <List component='nav' style={{maxWidth: '80vw', display: 'flex', flexDirection: 'column', flexGrow: 1}}>\r\n            {\r\n                sidebarComplete ?\r\n                    wikiPageEntries.map(entry =>\r\n                        <MySidebarLink url={entry.url} children={entry.title} key={entry.url}/>\r\n                    )\r\n                    : <CircularProgress/>\r\n            }\r\n            \r\n            <div style={{flexGrow: 1}}/>\r\n            \r\n            <ListItem key='search' button style={{paddingLeft: 5}}\r\n                      onClick={() => {\r\n                          setSearchingDialogShown(true);\r\n                      }}\r\n            >\r\n                <SearchIcon style={{marginRight: 5, marginLeft: 0, color: '#e64a19'}}/>\r\n                Search\r\n            </ListItem>\r\n        </List>\r\n    </WikiToSideBarContext.Provider>;\r\n    \r\n    const leftBarOnMobile = <>\r\n        <Drawer anchor='left' open={isDrawerOpen} onClose={\r\n            () => setIsDrawerOpen(false)\r\n        } style={{}}>\r\n            {leftBarComponent}\r\n        </Drawer>\r\n        \r\n        {/*render to make the effect trigger and set the wiki title.\r\n         It's a workaround and will be refactored*/}\r\n        {!isDrawerOpen && <div style={{display: \"none\"}}>\r\n            {leftBarComponent}\r\n        </div>}\r\n    </>;\r\n    \r\n    const leftBarOnPC = <div style={{\r\n        minWidth: '20vw', maxWidth: '20vw',\r\n        alignSelf: 'stretch', overflowY: 'auto',\r\n        display: 'flex', flexDirection: 'column'\r\n    }} className='My-Sticky'>{leftBarComponent}</div>;\r\n    \r\n    const scrollDomRef = useRef(null);\r\n    \r\n    const rightBarScrollRef = useRef(null as (null | HTMLDivElement));\r\n    \r\n    const {\r\n        wikiContentComponent: wikiContentComponent,\r\n        rightBarComponent: rightBarComponent,\r\n        updateScrollFunc: updateScrollFunc\r\n    } = useWikiContent(\r\n        // @ts-ignore\r\n        wikiContentUrl, wikiMarkdownRenderers, [gfm], scrollDomRef,\r\n        fallbackWikiContentUrl,\r\n        rightBarScrollRef\r\n    );\r\n    \r\n    const scrollTimerRef = useRef(null as any);\r\n    \r\n    const isVerticalMobile = getIsVerticalMobile();\r\n    return <div className='My-Page' style={{\r\n        display: 'flex', flexDirection: 'column'\r\n    }}>\r\n        <MyBanner text={t('Immersive Portals Wiki')} color='#9500ae'\r\n                  pageIconPath={getPublicResourcePath('/immptl.png')}>\r\n            {isVerticalMobile &&\r\n            <IconButton onClick={() => setIsDrawerOpen(!isDrawerOpen)}>\r\n                <MenuIcon style={{color: 'white'}}/>\r\n            </IconButton>}\r\n        </MyBanner>\r\n        \r\n        <div style={{\r\n            display: 'flex', flexDirection: 'row', alignItems: \"flex-start\",\r\n            overflowY: 'auto',\r\n            minHeight: 0, flexBasis: 0, flexGrow: 1\r\n        }} onScroll={() => {\r\n            if (scrollTimerRef.current) {\r\n                clearTimeout(scrollTimerRef.current);\r\n            }\r\n            \r\n            scrollTimerRef.current = setTimeout(updateScrollFunc, 300);\r\n        }} ref={scrollDomRef}>\r\n            {isVerticalMobile ? leftBarOnMobile : leftBarOnPC}\r\n            \r\n            <div style={{\r\n                margin: 0, padding: 20, flexGrow: 1,\r\n                minWidth: 0, flexBasis: 0\r\n            }} ref={rightBarScrollRef}>\r\n                <Typography variant='h4'>\r\n                    {wikiTitle}\r\n                </Typography>\r\n                <Divider style={{margin: 10}}/>\r\n                {isPageNotFound ? 'Page Not Found' : wikiContentComponent}\r\n            </div>\r\n            \r\n            {!isVerticalMobile && <div ref={rightBarScrollRef} style={{\r\n                margin: 0, minWidth: '20vw', maxWidth: '20vw',\r\n                alignSelf: 'stretch', overflowY: 'auto',\r\n            }} className='My-Sticky'>\r\n                <Typography variant='h5' style={{margin: 10, marginBottom: 0}}>\r\n                    {t('Contents')}\r\n                </Typography>\r\n                <Divider style={{margin: 10}}/>\r\n                {rightBarComponent}\r\n            </div>}\r\n        \r\n        \r\n        </div>\r\n        <SearchingContext.Provider value={{onClicked: () => setSearchingDialogShown(false)}}>\r\n            <SearchingDialogComponent\r\n                enabled={isSearchingDialogShown}\r\n                close={() => setSearchingDialogShown(false)}\r\n            />\r\n        </SearchingContext.Provider>\r\n    \r\n    \r\n    </div>;\r\n}","import React, {Suspense, useEffect, useRef, useState} from 'react';\r\nimport {Route, Switch, useLocation} from \"react-router-dom\";\r\nimport {CSSTransition, TransitionGroup} from \"react-transition-group\";\r\nimport {IndexPage} from \"./pages/IndexPage\";\r\nimport {IPPage} from \"./pages/IPPage\";\r\nimport './App.css'\r\nimport {IPWikiPage} from \"./pages/wiki/WikiPage\";\r\nimport {MyBanner} from \"./pages/MyBanner\";\r\nimport {Collapse} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Axios from \"axios\";\r\nimport {Octokit} from \"@octokit/core\";\r\nimport {testSearch} from \"./pages/wiki/WikiSearching\";\r\n\r\n\r\n\r\nexport function TestPage() {\r\n    \r\n    \r\n    return <div className='My-Page'>\r\n        <MyBanner text={\"test\"} color={'black'} pageIconPath={''}/>\r\n        \r\n        <Button onClick={() => {\r\n            async function doIt() {\r\n                testSearch();\r\n            }\r\n            doIt();\r\n        }}>h</Button>\r\n    </div>\r\n}\r\n\r\nexport function AnimatedPages() {\r\n    let location = useLocation();\r\n    \r\n    let refMouseX = useRef(0);\r\n    let refMouseY = useRef(0);\r\n    \r\n    useEffect(() => {\r\n        let root = document.documentElement;\r\n        \r\n        let listener = (e: any) => {\r\n            refMouseX.current = e.clientX;\r\n            refMouseY.current = e.clientY;\r\n            // root.style.setProperty('--mouse-x', e.clientX + \"px\");\r\n            // root.style.setProperty('--mouse-y', e.clientY + \"px\");\r\n        };\r\n        root.addEventListener(\"mousemove\", listener);\r\n        \r\n        return () => {\r\n            root.removeEventListener(\"mousemove\", listener);\r\n        }\r\n    }, []);\r\n    \r\n    document.documentElement.style.setProperty('--mouse-x', refMouseX.current + 'px');\r\n    document.documentElement.style.setProperty('--mouse-y', refMouseY.current + 'px');\r\n    \r\n    return (\r\n        <Suspense fallback={'loading'}>\r\n            <TransitionGroup>\r\n                <CSSTransition\r\n                    key={location.pathname}\r\n                    classNames=\"fade\"\r\n                    timeout={1000}\r\n                >\r\n                    <Switch location={location}>\r\n                        <Route path='/' exact>\r\n                            <IndexPage/>\r\n                        </Route>\r\n                        <Route path='/immptl/' exact>\r\n                            <IPPage/>\r\n                        </Route>\r\n                        <Route path='/immptl/wiki/'>\r\n                            <IPWikiPage/>\r\n                        </Route>\r\n                        <Route path='/test'>\r\n                            <TestPage/>\r\n                        </Route>\r\n                    </Switch>\r\n                </CSSTransition>\r\n            </TransitionGroup>\r\n        </Suspense>\r\n    \r\n    \r\n    );\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport {BrowserRouter as Router, Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {AnimatedPages} from \"./AnimatedPages\";\r\n\r\nfunction App() {\r\n    return (\r\n        <Router>\r\n            <Switch>\r\n                <AnimatedPages/>\r\n\r\n                {/*<Route exact path='/'>*/}\r\n                {/*    <Redirect to='/main'/>*/}\r\n                {/*</Route>*/}\r\n                {/*<Route path='*'>*/}\r\n                {/*   */}\r\n                {/*</Route>*/}\r\n            </Switch>\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './i18n'\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}